<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
    <!-- Generated by javadoc (build 1.5.0_05) on Tue Apr 18 14:41:32 CEST 2006 -->
    <TITLE>
        CacheMap
    </TITLE>

    <META NAME="keywords" CONTENT="CacheMap interface">

    <LINK REL="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

    <SCRIPT type="text/javascript">
        function windowTitle() {
            parent.document.title = "CacheMap";
        }
    </SCRIPT>
    <NOSCRIPT>
    </NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
    Interface CacheMap&lt;KeyType,ValueType&gt;</H2>
<HR>
<DL>
    <DT>
        <PRE>public interface <B>CacheMap&lt;KeyType,ValueType&gt;</B>
</DL>
</PRE>

<P>
    A generic cache. Works just like a Map, except that entries automatically "disappear"
    when they expire.
<p>

    For example if you have a bunch of persons in a database or external system,
    and you have a corresponding Person class with id of type Long, you can create a cache
    with 60-second expiry like this:
<p>
<pre>
 CacheMap&lt;Long, Person&gt; cache = new CacheMapImpl&lt;Long, Person&gt;();
 cache.setTimeToLive(60000);    
 </pre>

Your code for fetching a person by id would look something like this: <p>

<pre>
 Person person = cache.get(personId);           
 if (person == null) {                          
   person = slowSystemThatShouldntBeUsedTooOften.getPerson(personId);               
   cache.put(personId, person);
 }
 return person;
 </pre>

Additional notes: <br>
<ul>
    <li>
        Implementations do not have to be thread-safe.
    </li>
    <li>
        No methods should ever return or count any entries that have expired.
    </li>
    <li>
        Implementations do not have to clear expired entries automatically
        as soon as they expire.
        It is OK to clean up expired entries in conjunction with method calls instead.
        From the outside, however, it should look like entries disappear as soon as they
        get expired.
    </li>
    <li>
        For unit-testing purposes, this class should get the current time using
        the Clock class, not System.currentTimeMillis(). That way unit tests can override the
        time.
    </li>
</ul>
<P>

<P>
<DL>
    <DT><B>See Also:</B>
    <DD><A HREF="Clock.html" title="class in &lt;Unnamed&gt;"><CODE>Clock</CODE></A>
</DL>
<HR>

<P>

    <!-- ========== METHOD SUMMARY =========== -->

    <A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
        <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
            <B>Method Summary</B></FONT></TH>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;void</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#clear()">clear</A></B>()</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes all entries.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;void</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#clearExpired()">clearExpired</A></B>()</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clears all expired entries.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;boolean</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#containsKey(java.lang.Object)">containsKey</A></B>(java.lang.Object&nbsp;key)</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if the given key is included in this
            cache map.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;boolean</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#containsValue(java.lang.Object)">containsValue</A></B>(java.lang.Object&nbsp;value)</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if the given value is included in this
            cache map.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;<A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A></CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#get(java.lang.Object)">get</A></B>(java.lang.Object&nbsp;key)</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the value for the given key.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;long</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#getTimeToLive()">getTimeToLive</A></B>()</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;boolean</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#isEmpty()">isEmpty</A></B>()</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;True if this cache is empty.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;<A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A></CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#put(KeyType, ValueType)">put</A></B>(<A HREF="CacheMap.html"
                                                                                    title="type parameter in CacheMap">KeyType</A>&nbsp;key,
            <A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A>&nbsp;value)</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Caches the given value under the given key.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;<A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A></CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#remove(java.lang.Object)">remove</A></B>(java.lang.Object&nbsp;key)</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes the given key.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;void</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#setTimeToLive(long)">setTimeToLive</A></B>(long&nbsp;timeToLive)</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets how long new entries are kept in the cache.
        </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
            <CODE>&nbsp;int</CODE></FONT></TD>
        <TD><CODE><B><A HREF="CacheMap.html#size()">size</A></B>()</CODE>

            <BR>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;How many entries this cache map contains.
        </TD>
    </TR>
</TABLE>
&nbsp;
<P>

    <!-- ============ METHOD DETAIL ========== -->

    <A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
        <TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
            <B>Method Detail</B></FONT></TH>
    </TR>
</TABLE>

<A NAME="clear()"><!-- --></A>
<H3>
    clear</H3>
<PRE>
void <B>clear</B>()</PRE>
<DL>
    <DD>Removes all entries.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="clearExpired()"><!-- --></A>
<H3>
    clearExpired</H3>
<PRE>
void <B>clearExpired</B>()</PRE>
<DL>
    <DD>Clears all expired entries.
        This is called automatically in conjuction with most operations,
        but for memory optimization reasons you can call this explicitely at any time.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="containsKey(java.lang.Object)"><!-- --></A>
<H3>
    containsKey</H3>
<PRE>
boolean <B>containsKey</B>(java.lang.Object&nbsp;key)</PRE>
<DL>
    <DD>Checks if the given key is included in this cache map.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="containsValue(java.lang.Object)"><!-- --></A>
<H3>
    containsValue</H3>
<PRE>
boolean <B>containsValue</B>(java.lang.Object&nbsp;value)</PRE>
<DL>
    <DD>Checks if the given value is included in this cache map.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="get(java.lang.Object)"><!-- --></A>
<H3>
    get</H3>
<PRE>
<A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A> <B>get</B>(java.lang.Object&nbsp;key)</PRE>
<DL>
    <DD>Returns the value for the given key. Null if there is no value,
        or if it has expired.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="getTimeToLive()"><!-- --></A>
<H3>
    getTimeToLive</H3>
<PRE>
long <B>getTimeToLive</B>()</PRE>
<DL>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="isEmpty()"><!-- --></A>
<H3>
    isEmpty</H3>
<PRE>
boolean <B>isEmpty</B>()</PRE>
<DL>
    <DD>True if this cache is empty.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="put(java.lang.Object,java.lang.Object)"><!-- --></A><A NAME="put(KeyType, ValueType)"><!-- --></A>
<H3>
    put</H3>
<PRE>
<A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A> <B>put</B>(<A HREF="CacheMap.html"
                                                                                       title="type parameter in CacheMap">KeyType</A>&nbsp;key,
              <A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A>&nbsp;value)</PRE>
<DL>
    <DD>Caches the given value under the given key.

        If there already is an item under the given key, it will be replaced by the new value. <p>
        <P>
    <DD>
        <DL>
            <DT><B>Parameters:</B>
            <DD><CODE>key</CODE> - may not be null
            <DD><CODE>item</CODE> - may be null, in which case the cache entry will be removed (if it existed).
            <DT><B>Returns:</B>
            <DD>the previous value, or null if none
        </DL>
    </DD>
</DL>
<HR>

<A NAME="remove(java.lang.Object)"><!-- --></A>
<H3>
    remove</H3>
<PRE>
<A HREF="CacheMap.html" title="type parameter in CacheMap">ValueType</A> <B>remove</B>(java.lang.Object&nbsp;key)</PRE>
<DL>
    <DD>Removes the given key.
        <P>
    <DD>
        <DL>
            <DT><B>Parameters:</B>
            <DD><CODE>key</CODE> -
            <DT><B>Returns:</B>
            <DD>the previous value, if there was any
        </DL>
    </DD>
</DL>
<HR>

<A NAME="setTimeToLive(long)"><!-- --></A>
<H3>
    setTimeToLive</H3>
<PRE>
void <B>setTimeToLive</B>(long&nbsp;timeToLive)</PRE>
<DL>
    <DD>Sets how long new entries are kept in the cache. Until this method is called,
        some kind of default value should apply.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<HR>

<A NAME="size()"><!-- --></A>
<H3>
    size</H3>
<PRE>
int <B>size</B>()</PRE>
<DL>
    <DD>How many entries this cache map contains.
        <P>
    <DD>
        <DL>
        </DL>
    </DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<HR>

</BODY>
</HTML>
